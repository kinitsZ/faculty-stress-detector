# Hybrid AI System: Faculty Stress Detection and Wellness Recommendation System

## Overview

This project implements a **Hybrid Intelligent System** that combines Machine Learning (ML) and Rule-Based Expert Systems to detect faculty stress levels and provide personalized wellness recommendations. The system demonstrates the integration of two complementary AI paradigms:

- **Data-Driven Learning** (Python ML Component): Uses Random Forest classification to predict stress levels from workload data
- **Knowledge-Based Reasoning** (Visual Prolog Expert System): Applies expert rules to generate personalized wellness recommendations

## System Architecture

```
┌─────────────────────────────────────────────────────────────┐
│                    Hybrid AI System                          │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  ┌──────────────────────┐         ┌──────────────────────┐  │
│  │  Python ML Component │         │ Visual Prolog Expert │  │
│  │                      │         │      System          │  │
│  │  • Random Forest     │         │                      │  │
│  │  • Stress Prediction │────────▶│  • Rule-Based        │  │
│  │  • Feature Analysis  │  File   │  • Recommendations  │  │
│  │                      │  I/O    │  • Knowledge Base     │  │
│  └──────────────────────┘         └──────────────────────┘  │
│           │                                    │             │
│           └─────────── stress_output.txt ──────┘             │
│                                                               │
└─────────────────────────────────────────────────────────────┘
```

## Features

### Machine Learning Component (Python)
- ✅ **Random Forest Classifier** for stress level prediction (Low/Medium/High)
- ✅ **Workload Stress Score (WSS)** calculation based on 9 workload factors
- ✅ **Feature importance analysis** to identify key stress indicators
- ✅ **Model evaluation metrics** (accuracy, classification report, confusion matrix)
- ✅ **Batch analysis** capability for dataset-wide predictions
- ✅ **Interactive prediction** for individual faculty members

### Expert System Component (Visual Prolog)
- ✅ **Rule-based reasoning** with 10+ knowledge base facts
- ✅ **6 recommendation categories** (Primary Action, Workload, Wellness, Time Management, Social Support, Preventive Measures)
- ✅ **Symbolic reasoning** using Prolog facts and rules
- ✅ **Personalized recommendations** based on predicted stress level
- ✅ **Multiple indicator categories** (sleep, workload, wellness, meetings, research, etc.)

### Hybrid Integration
- ✅ **Seamless data flow** from ML prediction to expert system
- ✅ **File-based communication** between Python and Visual Prolog components
- ✅ **Unified AI solution** combining data-driven and knowledge-based approaches

## Project Structure

```
hybridAISystem/
│
├── README.md                          # This file
├── PYTHON_MLCOMPONENT/                # Python ML Component
│   ├── main.py                        # Main integration script
│   ├── stress_predictor.py            # ML model for stress prediction
│   ├── wellness_expert_python.py      # Python expert system (reference)
│   ├── generate_dataset.py            # Dataset generation script
│   ├── dataset.csv                    # Faculty workload dataset
│   ├── dataset_with_labels.csv        # Dataset with stress labels
│   ├── stress_model.joblib            # Trained ML model (generated)
│   ├── stress_output.txt              # Output file for integration (generated)
│   └── INTEGRATION_GUIDE.md           # Detailed integration guide
│
└── WellnessExpert/                    # Visual Prolog Expert System
    ├── wellness.pro                   # Prolog class declaration
    ├── wellness.cl                    # Expert system implementation
    ├── main.pro                       # Main class
    ├── main.cl                        # Main implementation
    ├── stress_output.txt              # Input file (generated by Python)
    └── exe64/
        └── WellnessExpert.exe         # Compiled executable
```

## Requirements

### Python Component
- Python 3.7+
- Required packages:
  ```bash
  pandas
  numpy
  scikit-learn
  joblib
  ```

### Visual Prolog Component
- Visual Prolog 11 or later
- Windows OS (for running the executable)

## Installation

### 1. Clone or Download the Repository

```bash
git clone <repository-url>
cd hybridAISystem
```

### 2. Install Python Dependencies

```bash
cd PYTHON_MLCOMPONENT
pip install pandas numpy scikit-learn joblib
```

### 3. Train the ML Model (First Time Setup)

The model will be automatically trained on first run, or you can train it explicitly:

```bash
python main.py
# Select option 4 to view model performance (trains the model)
```

This will generate `stress_model.joblib` in the `PYTHON_MLCOMPONENT` directory.

### 4. Visual Prolog Setup

- Open `WellnessExpert/WellnessExpert.vipprj` in Visual Prolog IDE
- Build the project (F9) to generate the executable
- Or use the pre-built executable in `WellnessExpert/exe64/`

## Usage

### Quick Start: Complete Workflow

1. **Run Python ML Component:**
   ```bash
   cd PYTHON_MLCOMPONENT
   python main.py
   ```

2. **Select an option:**
   - Option 1: Enter new faculty data manually
   - Option 2: Select faculty from dataset (e.g., F001, F002, etc.)
   - Option 3: Batch analyze entire dataset
   - Option 4: View model performance metrics
   - Option 5: Exit

3. **The system will:**
   - Predict stress level using ML model
   - Generate `stress_output.txt` file
   - Run Python expert system for recommendations

4. **Run Visual Prolog Expert System (Optional):**
   - Navigate to `WellnessExpert/exe64/`
   - Run `WellnessExpert.exe`
   - The system reads `stress_output.txt` and displays recommendations

### Example: Predicting Stress for a Faculty Member

```bash
cd PYTHON_MLCOMPONENT
python main.py
```

**Input Example:**
```
Select option (1-5): 2
Enter Faculty ID: F001
```

**Output:**
```
ML COMPONENT OUTPUT
==================================================
Workload Stress Score (WSS): 18
Actual Stress Level: Medium
ML Model Prediction: Medium
Prediction: [CORRECT]

Prediction Confidence:
  High  : ##### 25.0%
  Low   : ###### 30.0%
  Medium: ######### 45.0%

Running Expert System for recommendations...
```

## Dataset

The system uses a faculty workload dataset with the following features:

| Feature | Description | Range |
|---------|-------------|-------|
| `Subjects_Handled` | Number of courses taught | 1-6 |
| `Students_Total` | Total number of students | 20-200 |
| `Prep_Hours` | Preparation hours per week | 3-15 |
| `Research_Load_Hours` | Research hours per week | 0-12 |
| `Committee_Duties` | Number of committee assignments | 0-5 |
| `Admin_Tasks` | Number of administrative tasks | 0-6 |
| `Meeting_Hours` | Meeting hours per week | 1-10 |
| `Sleep_Hours` | Average sleep hours per night | 4-9 |
| `Weekend_Work` | Weekend work frequency | 0-5 |

**Target Variable:** `Stress_Level` (Low, Medium, High)

The dataset contains 250+ faculty records with labeled stress levels calculated using the Workload Stress Score (WSS) formula.

## Workload Stress Score (WSS) Formula

The WSS is calculated based on 9 workload factors, each contributing 1-3 points:

- **Subjects Handled**: 1-2 = 1pt, 3-4 = 2pts, 5+ = 3pts
- **Total Students**: <60 = 1pt, 60-100 = 2pts, >100 = 3pts
- **Preparation Hours**: <6 = 1pt, 6-10 = 2pts, >10 = 3pts
- **Research Load**: <4 = 1pt, 4-6 = 2pts, >6 = 3pts
- **Committee Duties**: 0-1 = 1pt, 2 = 2pts, 3+ = 3pts
- **Admin Tasks**: 0-1 = 1pt, 2-3 = 2pts, 4+ = 3pts
- **Meeting Hours**: <3 = 1pt, 3-6 = 2pts, >6 = 3pts
- **Sleep Hours**: 7+ = 1pt, 6 = 2pts, <6 = 3pts
- **Weekend Work**: 0 = 1pt, 1-2 = 2pts, 3+ = 3pts

**Stress Level Classification:**
- **Low**: WSS ≤ 14
- **Medium**: 15 ≤ WSS ≤ 20
- **High**: WSS ≥ 21

## Expert System Knowledge Base

The Visual Prolog expert system contains:

### Facts (10+ Indicators)
- Sleep indicators
- Workload indicators
- Wellness indicators
- Meeting load indicators
- Research load indicators
- Committee involvement indicators
- Administrative task indicators
- Work-life balance indicators
- Productivity indicators
- Health risk indicators

### Rules (6 Recommendation Categories)
1. **Primary Action**: Immediate response based on stress level
2. **Workload Management**: Task prioritization and delegation
3. **Wellness Activities**: Health and self-care recommendations
4. **Time Management**: Scheduling and calendar optimization
5. **Social Support**: Networking and peer support
6. **Preventive Measures**: Long-term stress prevention strategies

## Integration Details

The Python ML component and Visual Prolog expert system communicate via a text file:

**File:** `stress_output.txt`

**Format:**
```
faculty_id:F001,stress_level:medium
```

The file is written by Python and read by Visual Prolog. See `INTEGRATION_GUIDE.md` for detailed integration instructions.

## Model Performance

The Random Forest classifier achieves:
- **High accuracy** on the test dataset
- **Balanced class performance** using class weights
- **Feature importance** analysis for interpretability

Run option 4 in `main.py` to view detailed performance metrics including:
- Accuracy score
- Classification report (precision, recall, F1-score)
- Confusion matrix
- Feature importance rankings

## Troubleshooting

### Issue: Model file not found
**Solution:** Run `python main.py` and select option 4 to train the model. The model will be saved as `stress_model.joblib`.

### Issue: Visual Prolog can't find `stress_output.txt`
**Solution:** Ensure Python writes to the correct directory. The system writes to multiple locations:
- `PYTHON_MLCOMPONENT/stress_output.txt`
- `../stress_output.txt` (parent directory)
- `WellnessExpert/exe64/stress_output.txt` (if exe64 directory exists)

### Issue: Stress level format mismatch
**Solution:** Python writes lowercase (low/medium/high), which Visual Prolog handles correctly. Ensure the file format matches: `faculty_id:XXX,stress_level:YYY`

### Issue: Import errors in Python
**Solution:** Install required packages:
```bash
pip install pandas numpy scikit-learn joblib
```

## Development

### Adding New Features

**To add new ML features:**
1. Update `feature_columns` in `stress_predictor.py`
2. Retrain the model
3. Update dataset generation in `generate_dataset.py`

**To add new expert system rules:**
1. Add facts to `wellness.cl` (Visual Prolog)
2. Add corresponding rules
3. Update display predicates if needed

### Extending the System

- **Web Interface**: Add Flask/FastAPI wrapper for web access
- **Database Integration**: Replace file I/O with database connections
- **Real-time Monitoring**: Add continuous monitoring capabilities
- **Mobile App**: Create mobile interface for faculty self-assessment

## Academic Context

This project demonstrates:
- **Hybrid AI Systems**: Combining ML and expert systems
- **Data-Driven Learning**: Supervised learning from labeled data
- **Symbolic Reasoning**: Rule-based knowledge representation
- **System Integration**: Inter-component communication
- **Practical Application**: Real-world faculty wellness monitoring

## License

This project is developed for academic purposes as part of CS18A Final Exam Project.

## Authors

Developed as part of the Hybrid AI System course project.

## Acknowledgments

- Faculty workload data and stress assessment methodology
- Visual Prolog development environment
- Scikit-learn machine learning library

---

For detailed integration instructions, see [INTEGRATION_GUIDE.md](PYTHON_MLCOMPONENT/INTEGRATION_GUIDE.md)

